!function(a,b){return"function"==typeof define&&define.amd?(define("charty",function(){return b()}),void 0):b()}(this,function(){var a={};return a.CHART_NAMES={AXIS:"Axis",BAR:"Bar",BASE_CHART:"BaseChart",CIRCLE:"Circle",DONUT:"Donut",LINE:"Line",ROUNDED_RECTANGLE:"RoundedRectangle",TEXT:"Text",TRIANGLE:"Triangle",XY_AXIS:"XYAxis",YXY_AXIS:"YXYAxis",BAR_CHART:"BarChart",LABELED_TRIANGLE_CHART:"LabeledTriangleChart",SCATTERPLOT:"Scatterplot",MULTIPLE_DATA_GROUP:"MultipleDataGroup",MULTIPLE_INSTANCES_MIXIN:"MultipleInstancesMixin",SIMPLE_DATA_GROUP:"SimpleDataGroup",DONUT_INNER_TEXT:"DonutWithInnerText",GROUPED_BAR_CHART:"GroupedBarChart",LINE_CHART:"LineChart",LINE_CHART_CIRCLES:"LineChartCircles"},a.AXIS_TYPE={ORDINAL:"ordinal",LINEAR:"linear"},a.AXIS={X:"x",Y:"y"},a}),function(a,b){return"function"==typeof define&&define.amd?(define("basescale",["d3.chart","charty"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){var c=function(){};return c.prototype.getScale=function(){return this.scale},c.prototype.generateRange=function(a){var c;if(this.axisType===b.AXIS.X)c=[0,a];else{if(this.axisType!==b.AXIS.Y)throw new Error("No scale was defined for this scale.");c=[a,0]}return c},c}),function(a,b){return"function"==typeof define&&define.amd?(define("linearscale",["d3.chart","basescale"],function(a,c){return b(a,c)}),void 0):b(d3,BaseScale)}(this,function(a,b){var c=function(b){this.scale=a.scale.linear(),this.axisType=b};return c.prototype=new b,c.prototype.setDomain=function(a,b){return this.scale=this.scale.domain([a,b]),this},c.prototype.setRange=function(a){return this.scale=this.scale.range(this.generateRange(a)),this},c.prototype.map=function(a){return this.scale(a)},c.prototype.band=function(a,b){return a-this.scale(b)},c.prototype.calculateDomain=function(b,c){var e=-1e5,f=1e6;return d=b.getData(),d.forEach(function(b){var d=b.data,g=a.max(d,c),h=a.min(d,c);e=Math.max(g,e),f=Math.min(h,f)}),this.min=f,this.setDomain(Math.min(0,f),Math.max(0,e))},c}),function(a,b){return"function"==typeof define&&define.amd?(define("ordinalscale",["d3.chart","basescale"],function(a,c){return b(a,c)}),void 0):b(d3,BaseScale)}(this,function(a,b){var c=function(b){this.scale=a.scale.ordinal(),this.axisType=b};return c.prototype=new b,c.prototype.setDomain=function(a){return this.scale=this.scale.domain(a),this},c.prototype.setRange=function(a){return this.scale=this.scale.rangeRoundBands(this.generateRange(a),.1),this},c.prototype.map=function(a,b){return this.scale(a)+(this.scale.rangeBand()-this.scale.rangeBand()*b)/2},c.prototype.band=function(a){return this.scale.rangeBand()*a},c.prototype.calculateDomain=function(a,b){var c=a.first().data,d=c.map(b);return this.setDomain(d)},c.prototype.defaultDomain=function(){return 0===this.scale.domain().length},c}),function(a,b){return"function"==typeof define&&define.amd?(define("scalesfactory",["d3.chart","charty","ordinalscale","linearscale"],function(a,c,d,e){return b(a,c,d,e)}),void 0):b(d3,charty,OrdinalScale,LinearScale)}(this,function(a,b,c,d){var e=function(){};return e.prototype.scale=function(a,e){var f;switch(a){case b.AXIS_TYPE.ORDINAL:f=new c(e);break;case b.AXIS_TYPE.LINEAR:f=new d(e)}return f},e}),function(a,b){return"function"==typeof define&&define.amd?(define("basechart",["d3.chart","underscore"],function(a,c){return b(a,c)}),void 0):b(d3,_)}(this,function(a,b){a.chart("BaseChart",{width:function(a){if(0===arguments.length)return this.w;if(!a||!b.isNumber(a)||0>a)throw new Error("Invalid width value for chart.");return this.w=a,this.componentsMixins&&b.each(this.componentsMixins,function(b){b.width(a)}),this},height:function(a){if(0===arguments.length)return this.h;if(!a||!b.isNumber(a)||0>a)throw new Error("Invalid height value for chart.");return this.h=a,this.componentsMixins&&b.each(this.componentsMixins,function(b){b.height(a)}),this},setXScale:function(a){if(!a)throw new Error("Undefined x scale");return this.xscale=a,this.componentsMixins&&b.each(this.componentsMixins,function(b){b.setXScale(a)}),this},setYScale:function(a){if(!a)throw new Error("Undefined y scale");return this.yscale=a,this.componentsMixins&&b.each(this.componentsMixins,function(b){b.setYScale(a)}),this}})}),function(a,b){return"function"==typeof define&&define.amd?(define("simpledatagroup",["d3.chart","charty","basechart"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.BASE_CHART).extend(b.CHART_NAMES.SIMPLE_DATA_GROUP,{transform:function(a){return a.next()}})}),function(a,b){return"function"==typeof define&&define.amd?(define("axis",["d3.chart","charty"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.AXIS,{initialize:function(){this.xt=0,this.yt=0;var b={c:"axis"},c=a.svg.axis(),d={dataBind:function(a){var d=this.chart();if(!d.scale)throw new Error("Undefined scale for axis.");return d.c=a.c||b.c,c=c.scale(d.scale.getScale()).orient(d.o),this.selectAll("g").data([!0])},insert:function(){return this.append("g")},events:{merge:function(){var a=this.chart();return a.grid&&(c=c.tickSize(-a.tsize,0,0)),this.attr("class",a.c).call(c),(0!==a.xt||0!==a.yt)&&this.attr("transform","translate("+a.xt+","+a.yt+")"),this},remove:function(){return this.remove()}}};this.layer("axis",this.base.append("g"),d)},tickSize:function(a){return this.tsize=a||0,this},setScale:function(a){return this.scale=a,this},showAsGrid:function(a){return this.grid=a,this},orient:function(a){return this.o=a||"bottom",this},xtranslate:function(a){return this.xt=a,this},ytranslate:function(a){return this.yt=a,this}})}),function(a,b){return"function"==typeof define&&define.amd?(define("bar",["d3.chart","charty","simpledatagroup"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.SIMPLE_DATA_GROUP).extend(b.CHART_NAMES.BAR,{initialize:function(){var a={c:"bar-default"},b={dataBind:function(b){var c=this.chart();return c.c=b.color||a.c,this.selectAll("rect").data(b.data)},insert:function(){return this.append("rect")},events:{merge:function(){var a=this.chart(),b=a.yscale.map(0),c=a.h-b;return this.attr("class",function(b){return b.c||a.c}).attr("x",function(b){return a.xscale.map(b.x,a.factor)}).attr("width",a.xscale.band(a.factor)).attr("y",function(c){return Math.min(b,a.yscale.map(c.y,a.factor))}).attr("height",function(b){return Math.abs(a.yscale.band(a.h,b.y)-c)}),this},exit:function(){return this.remove()}}};this.layer("barlayer",this.base,b)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("circle",["d3.chart","underscore","charty","simpledatagroup"],function(a,c,d){return b(a,c,d)}),void 0):b(d3,_,charty)}(this,function(a,b,c){a.chart(c.CHART_NAMES.SIMPLE_DATA_GROUP).extend(c.CHART_NAMES.CIRCLE,{initialize:function(){var a={r:5,c:"circle-default"},c={dataBind:function(c){var d=this.chart();if(d.c=c.color||a.c,c.r){if(!b.isNumber(c.r)||c.r<0)throw new Error("Circle radius must be a positive number.");d.r=c.r}else d.r=a.r;return this.selectAll("circle").data(c.data)},insert:function(){return this.append("circle")},events:{merge:function(){var a=this.chart();return this.attr("class",function(b){return b.c||a.c}).attr("r",function(b){return b.r||a.r}).attr("cx",function(b){return a.xscale.map(b.x,0)}).attr("cy",function(b){return a.yscale.map(b.y,0)})},exit:function(){return this.remove()}}};this.layer("circles",this.base.append("g"),c)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("donut",["d3.chart","underscore","charty","simpledatagroup"],function(a,c,d){return b(a,c,d)}),void 0):b(d3,_,charty)}(this,function(a,b,c){a.chart(c.CHART_NAMES.SIMPLE_DATA_GROUP).extend(c.CHART_NAMES.DONUT,{initialize:function(){var c={ir:90,or:50},d=a.layout.pie().sort(null).value(function(a){return a.x}),e=a.svg.arc(),f={dataBind:function(a){var f=this.chart();f.xPosition=a.xPosition||f.w/2,f.yPosition=a.yPosition||f.h/2;var g=Math.min(f.w,f.h)/2,h=a.ir||c.ir,i=a.or||c.or;if(!b.isNumber(h)||!b.isNumber(i))throw new Error("Radius for donut chart must be numerical values");return e=e.innerRadius(g-h).outerRadius(g-i),this.selectAll("path").data(d(a.data))},insert:function(){return this.append("path")},events:{enter:function(){var a=this.chart();return this.attr("transform","translate("+a.xPosition+","+a.yPosition+")").attr("fill",function(a){return a.data.c}).attr("d",e)},update:function(){return this.chart(),this.attr("fill",function(a){return a.data.c}).attr("d",e)},exit:function(){return this.remove()}}};this.layer("paths",this.base.append("g"),f)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("line",["d3.chart","charty","simpledatagroup"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.SIMPLE_DATA_GROUP).extend(b.CHART_NAMES.LINE,{initialize:function(){var b={c:"line-default"},c=a.svg.line(),d={dataBind:function(a){var d=this.chart();return c.x(function(a){return d.xscale.map(a.x,0)}).y(function(a){return d.yscale.map(a.y,0)}),d.datum=a.data,d.c=a.color||b.c,this.selectAll("path").data([0])},insert:function(){return this.append("path")},events:{merge:function(){var a=this.chart();return this.datum(a.datum).attr("class",a.c).attr("d",c)},exit:function(){return this.remove()}}};this.layer("lineslayer",this.base.append("g"),d)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("roundedrectangle",["d3.chart","underscore","charty","simpledatagroup"],function(a,c,d){return b(a,c,d)}),void 0):b(d3,_,charty)}(this,function(a,b,c){a.chart(c.CHART_NAMES.SIMPLE_DATA_GROUP).extend(c.CHART_NAMES.ROUNDED_RECTANGLE,{initialize:function(){var a={rh:20,rw:20,rc:"rounded-rectangle-default",rx:5,ry:5},c=this.base,d={dataBind:function(b){var c=this.chart();return c.rh=b.rh||a.rh,c.rw=b.rw||a.rw,c.rc=b.rc||a.rc,c.rx=b.rx||a.rx,c.ry=b.ry||a.ry,this.selectAll("rect").data(b.data)},insert:function(){return this.append("rect")},events:{merge:function(){var a=this.chart();if(a.rh&&(!b.isNumber(a.rh)||a.rh<0))throw new Error("Invalid value for rectangle height. Must be positive number.");if(a.rw&&(!b.isNumber(a.rw)||a.rw<0))throw new Error("Invalid value for rectangle width. Must be positive number.");return this.attr("height",a.rh).attr("width",a.rw).attr("x",function(b){var c=a.xscale.map(b.x,1)+a.xscale.band(1)/2-a.rw/2;return c}).attr("y",function(b){return a.yscale.map(b.y)-a.rh/2}).attr("rx",a.rx).attr("ry",a.ry).attr("fill",function(b){return b.rc||a.rc})},exit:function(){return this.remove()}}};this.layer("roundedrects",c,d)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("text",["d3.chart","charty","simpledatagroup"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.SIMPLE_DATA_GROUP).extend(b.CHART_NAMES.TEXT,{initialize:function(){var a={dataBind:function(a){return this.selectAll("text").data(a.data)},insert:function(){return this.append("text")},events:{enter:function(){var a=this.chart();return this.attr("x",function(b){return a.xscale.map(b.x,1)+a.xscale.band(1)/2}).attr("y",function(b){return a.yscale.map(b.y)}).attr("text-anchor","middle").attr("dy","0.35em").text(function(a){return a.y})},update:function(){var a=this.chart();return this.attr("x",function(b){return a.xscale.map(b.x,1)+a.xscale.band(1)/2}).attr("y",function(b){return a.yscale.map(b.y)}).text(function(a){return a.y})},exit:function(){return this.remove()}}};this.layer("texts",this.base.append("g"),a)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("triangle",["d3.chart","charty","simpledatagroup"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.SIMPLE_DATA_GROUP).extend(b.CHART_NAMES.TRIANGLE,{initialize:function(){var a={c:"triangle-default"},b={dataBind:function(b){var c=this.chart();return c.c=b.color||a.c,this.selectAll("path").data(b.data)},insert:function(){return this.append("path")},events:{merge:function(){var a=this.chart(),b=a.yscale.map(0),c=a.xscale.band(1);return this.attr("class",function(b){return b.c||a.c}).attr("d",function(d){return a.getPath(d,b,c)})},exit:function(){return this.remove()}}};this.layer("triangles",this.base.append("g"),b)},getPath:function(a,b,c){var d=this.xscale.map(a.x,1);return"M "+d+" "+b+" L "+(d+c/2)+" "+this.yscale.map(a.y)+" L "+(d+c)+" "+b}})}),function(a,b){return"function"==typeof define&&define.amd?(define("multipledatagroup",["d3.chart","charty","basechart"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.BASE_CHART).extend(b.CHART_NAMES.MULTIPLE_DATA_GROUP,{transform:function(a){return this.xscale.calculateDomain(a,function(a){return a.x}).setRange(this.w),this.yscale.calculateDomain(a,function(a){return a.y}).setRange(this.h),a}})}),function(a,b){return"function"==typeof define&&define.amd?(define("multipleinstancesmixin",["d3.chart","charty","basechart"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.BASE_CHART).extend(b.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,{initialize:function(a){var b=a.instances;this.componentsMixins=[];for(var c=a.instances-1;c>=0;c--){var d=this.mixin(a.chartName,this.base.append("g"));d.factor=b--/a.instances,this.componentsMixins.push(d)}}})}),function(a,b){return"function"==typeof define&&define.amd?(define("xyaxis",["d3.chart","charty","axis"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.XY_AXIS,{initialize:function(){this.xaxis=this.mixin(b.CHART_NAMES.AXIS,this.base.append("g")).orient("bottom"),this.yaxis=this.mixin(b.CHART_NAMES.AXIS,this.base.append("g")).orient("left")},showAsGrid:function(){return this.xaxis.showAsGrid(!0),this.yaxis.showAsGrid(!0),this},height:function(a){return this.xaxis.ytranslate(a).tickSize(a),this},width:function(a){return this.yaxis.tickSize(a),this},setXScale:function(a){return this.xaxis.setScale(a),this},setYScale:function(a){return this.yaxis.setScale(a),this}})}),function(a,b){return"function"==typeof define&&define.amd?(define("yxyaxis",["d3.chart","charty","axis"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.YXY_AXIS,{initialize:function(){this.xaxis=this.mixin(b.CHART_NAMES.AXIS,this.base.append("g")).orient("bottom"),this.yaxisleft=this.mixin(b.CHART_NAMES.AXIS,this.base.append("g")).orient("left"),this.yaxisright=this.mixin(b.CHART_NAMES.AXIS,this.base.append("g")).orient("right")},showAsGrid:function(){return this.xaxis.showAsGrid(!0),this.yaxisleft.showAsGrid(!0),this},height:function(a){return this.xaxis.ytranslate(a).tickSize(a),this},width:function(a){return this.yaxisright.xtranslate(a),this.yaxisleft.tickSize(a),this},setXScale:function(a){return this.xaxis.setScale(a),this},setYScale:function(a){return this.yaxisleft.setScale(a),this.yaxisright.setScale(a),this}})}),function(a,b){return"function"==typeof define&&define.amd?(define("barchart",["d3.chart","charty","bar","multipledatagroup","yxyaxis","multipleinstancesmixin"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(b.CHART_NAMES.BAR_CHART,{initialize:function(a){var c={chartName:b.CHART_NAMES.BAR,instances:a.instances||1},d=this.mixin(b.CHART_NAMES.YXY_AXIS,this.base.append("g")).showAsGrid(),e=this.mixin(b.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),c);this.componentsMixins=[],this.componentsMixins.push(e),this.componentsMixins.push(d)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("donutwithinnertext",["d3.chart","charty","donut"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.DONUT).extend(b.CHART_NAMES.DONUT_INNER_TEXT,{initialize:function(){var a={fontSize:55},b={dataBind:function(b){var c=this.chart();c.fontSize=b.fontSize||a.fontSize,c.xPosition=b.xPosition||c.w/2,c.yPosition=b.yPosition||c.h/2;var d=b.data,e=d[0].x.toString()+"%";return this.selectAll("text").data([e])},insert:function(){return this.append("text")},events:{enter:function(){var a=this.chart();return this.attr("x",a.xPosition).attr("y",a.yPosition).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size",a.fontSize).text(function(a){return a}),this},update:function(){return this.text(function(a){return a}),this},exit:function(){return this.remove()}}};this.layer("donutText",this.base.append("g"),b)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("labeledtrianglechart",["d3.chart","charty","triangle","roundedrectangle","text","multipleinstancesmixin","yxyaxis","multipledatagroup"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(b.CHART_NAMES.LABELED_TRIANGLE_CHART,{initialize:function(){var a=this.mixin(b.CHART_NAMES.YXY_AXIS,this.base.append("g")).showAsGrid(),c=this.mixin(b.CHART_NAMES.TRIANGLE,this.base.append("g")),d=this.mixin(b.CHART_NAMES.ROUNDED_RECTANGLE,this.base.append("g")),e=this.mixin(b.CHART_NAMES.TEXT,this.base.append("g"));this.componentsMixins=[],this.componentsMixins.push(c),this.componentsMixins.push(d),this.componentsMixins.push(e),this.componentsMixins.push(a)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("linechart",["d3.chart","charty","line","multipledatagroup"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(b.CHART_NAMES.LINE_CHART,{initialize:function(a){var c={chartName:b.CHART_NAMES.LINE,instances:a.instances||1},d=this.mixin(b.CHART_NAMES.YXY_AXIS,this.base.append("g")).showAsGrid(),e=this.mixin(b.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),c);this.componentsMixins=[],this.componentsMixins.push(e),this.componentsMixins.push(d)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("linechartcircles",["d3.chart","charty","multipledatagroup","linechart","multipleinstancesmixin"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(b.CHART_NAMES.LINE_CHART_CIRCLES,{initialize:function(a){var c={chartName:b.CHART_NAMES.CIRCLE,instances:a.instances||1},d=this.mixin(b.CHART_NAMES.LINE_CHART,this.base.append("g"),c),e=this.mixin(b.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),c);this.componentsMixins=[],this.componentsMixins.push(d),this.componentsMixins.push(e)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("scatterplot",["d3.chart","charty","circle","multipledatagroup","yxyaxis","multipleinstancesmixin"],function(a,c){return b(a,c)}),void 0):b(d3,charty)}(this,function(a,b){a.chart(b.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(b.CHART_NAMES.SCATTERPLOT,{initialize:function(a){var c={chartName:b.CHART_NAMES.CIRCLE,instances:a.instances||1},d=this.mixin(b.CHART_NAMES.YXY_AXIS,this.base.append("g")).showAsGrid(),e=this.mixin(b.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base,c);this.componentsMixins=[],this.componentsMixins.push(e),this.componentsMixins.push(d)}})}),function(a,b){return"function"==typeof define&&define.amd?(define("chartsapi",["d3.chart","scalesfactory","barchart","labeledtrianglechart","linechart","scatterplot","donut","donutwithinnertext","linechartcircles"],function(a,c){return b(a,c)}),void 0):b(d3,ScaleFactory)}(this,function(a,b){var c=function(){this.scaleFactory=new b};return c.prototype.chart=function(b){if(!b.root||!b.chartName)throw new Error("Root element or chart name not defined");var c=a.select(b.root),d=parseInt(c.style("height"),10)||200,e=parseInt(c.style("width"),10)||200;b.imgLocation&&c.classed(b.imgLocation,!0);var f={left:b.marginleft||0,top:b.margintop||0,lfactor:b.marginlfactor||1,tfactor:b.margintfactor||1},g=c.append("svg").attr("width",e).attr("height",d);g=g.append("g").attr("transform","translate("+f.left+","+f.top+")"),e=(e-f.top)*f.tfactor,d=(d-f.left)*f.lfactor;var h=g.chart(b.chartName,{instances:b.instances}).height(d).width(e);return b.xAxis&&(h=h.setXScale(this.scaleFactory.scale(b.xAxis,"x"))),b.yAxis&&(h=h.setYScale(this.scaleFactory.scale(b.yAxis,"y"))),h},c});